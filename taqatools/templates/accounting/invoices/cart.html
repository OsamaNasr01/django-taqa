{% extends 'base.html' %} {% load static %} {% block title %} Add Sale Invoice
{% endblock %} {% block content %}
<link rel="stylesheet" href="{% static 'cart/cart.css' %}" /><meta name="csrf-token" content="{{ csrf_token }}">
<div class="container" id="cart_div">
    <h3>Cart Items</h3>
    <input type="hidden" value="{{json_data}}" id="json_data">
    {% csrf_token %}
    <!-- Add the table element with the Bootstrap classes -->
    <table class="table table-striped table-bordered table-hover" id="cart_items">
        <tr id="table_head">
            <th>#</th>
            <th>Name</th>
            <th>Price</th>
            <th>NO</th>
            <th>Total</th>
            <th>Delete</th>
        </tr>
    </table>
    <div>
        <h5 id="cart_total"></h5>
    </div>


    <button type="button" onclick="add('offer')" class="btn btn-primary" data-bs-toggle="modal"
        data-bs-target="#price-offer-modal">
        Price Offer</button>
    <button type="button" onclick="add('sale')" class="btn btn-primary" data-bs-toggle="modal"
        data-bs-target="#price-offer-modal">
        Sale invoice</button>
    <button type="button" onclick="add('purchase')" class="btn btn-primary" data-bs-toggle="modal"
        data-bs-target="#price-offer-modal">
        Purchase invoice</button>

    <div class="modal fade" id="price-offer-modal" tabindex="-1" aria-labelledby="price-offer-modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="price-offer-modal">Update</h5>
                    <button type="button" class="btn-close" id="close_modal" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body">
                    <form action="{% url 'add_offer' %}" id="offer_form" method="post" name="price-offer_form">
                        {% csrf_token %}
                        <div class="form-group mb-4" id="name_input">
                            <label for="search" class="form-label">Search:</label>
                            <input type="text" list="user-list" id="search" name="search" placeholder="Enter User name"
                                class="form-control">
                            <datalist id="user-list">
                            </datalist>
                        </div>
                        <div class="form-group mb-4">
                            <label for="description" class="form-label">Description:</label>
                            <input type="text" id="description" name="description"
                                placeholder="Enter a brief description of the offer" class="form-control">
                        </div>
                        <button type="submit" id="offer_submit" class="btn btn-primary">Submit</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

</div>
<div class="cart">
    <div class="main-content">
        <div class="products">
            <div class="header">
                <h2>Cart</h2>
                <button>Clear all</button>
            </div>
            <div class="content">
                <div class="head">
                    <p>Product</p> 
                    <p>Count</p>
                    <p>Price</p>
                    <p>Clear</p>
                </div>
                {% for item in items %}
                    <div class="card">
                        <div class="details">
                            <div class="image">
                                <img
                                    src="{% static 'images/tanks.jpg' %}"
                                    alt=""
                                />
                            </div>
                            <div class="text">
                                <h2>{{item.product.name}}</h2>
                                <p>{{ item.product.description }}</p>
                            </div>
                        </div>
                        <div class="count">
                            <button class="negative"><p>-</p></button>
                            <div class="counter">1</div>
                            <button class="plus"><p>+</p></button>
                        </div>
                        <div class="price"><h2>{{item.product.price}}</h2></div>
                        <div class="clear">x</div>
                    </div>
                {% endfor %}
            </div>
        </div>
        <div class="checkout">
            <div>
                <h4>Items count</h4>
                <p>5</p>
            </div>
            <div>
                <h4>Subtotal</h4>
                <p>31255$</p>
            </div>
            <div>
                <h4>Discound</h4>
                <p>00.0$</p>
            </div>
            <div>
                <h4>Total</h4>
                <p>31255$</p>
            </div>
            <button>Continue to checkout</button>
        </div>
    </div>
</div>

<script>
    let negative = document.querySelector(".negative");
    let plus = document.querySelector(".plus");
    let counter = 1;
    let mainCount = document.querySelector(".counter");

    plus.onclick = function (e) {
        e.preventDefault();
        mainCount.innerHTML = ++counter;
    };
    negative.onclick = function (e) {
        if (counter > 1) {
            e.preventDefault();
            mainCount.innerHTML = --counter;
        }
    };
</script>
<script src="{% static 'accounting/cart.js' %}"></script>

{% endblock %}
