{% extends 'base.html' %}

{% block title %} Invoices {% endblock %}

{% block content %}
  
  <div class="form-group">
    <label for="name">Name</label>
    <input type="text" class="form-control" id="name" >
  </div>
  <div class="form-group">
    <label for="value">Value</label>
    <input type="number" class="form-control" id="value" >
  </div><br>
    
    <button class="btn btn-primary" id="post">Add H1</button>

<h1 id="output"></h1>
{% endblock %}


{% block script %}
  <script>
    const name = document.getElementById('name')
    const value = document.getElementById('value')
    const csrfToken = '{{csrf_token}}';
    document.getElementById('post').onclick = () => {
      const  requestObj = new XMLHttpRequest()
      requestObj.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
          console.log(this.responseText)
          const resTxt = this.responseText
          h.innerHTML= resTxt
        }
      }
      let h = document.getElementById('output')
      requestObj.open("POST", '/invoice/add_h1/')
      requestObj.setRequestHeader("X-CSRFToken", csrfToken)
      const formdata = new FormData()
      formdata.append('name', name.value)
      formdata.append('value', value.value)
      requestObj.send(formdata)
      console.log(this.responseText)
    }

  </script>
{% endblock %}
